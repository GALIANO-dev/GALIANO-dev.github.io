<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Restaurante App</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

  <!-- Navegación -->
  <nav class="bg-white shadow p-4 fixed top-0 left-0 right-0 z-10">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold">Restaurante App</h1>
      <div>
        <button onclick="mostrarVista('cliente')" class="mx-2 text-sm hover:underline">Cliente</button>
        <button onclick="mostrarVista('cocina')" class="mx-2 text-sm hover:underline">Cocina</button>
        <button onclick="mostrarVista('gerente')" class="mx-2 text-sm hover:underline">Gerente</button>
      </div>
    </div>
  </nav>

  <!-- Cliente -->
  <section id="vista-cliente" class="pt-24 hidden">
    <div class="container mx-auto">
      <h2 class="text-2xl font-semibold mb-4">Menú del Restaurante</h2>
      <div id="menu" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      <div class="mt-6">
        <h3 class="text-xl font-semibold">Pedido Actual</h3>
        <ul id="resumenPedido" class="list-disc list-inside mb-4"></ul>
        <button onclick="enviarPedido()" class="bg-green-500 text-white px-4 py-2 rounded">Enviar a cocina</button>
      </div>
    </div>
  </section>

  <!-- Cocina -->
  <section id="vista-cocina" class="pt-24 hidden">
    <div class="container mx-auto">
      <h2 class="text-2xl font-semibold mb-4">Pedidos en Cocina</h2>
      <div id="panelCocina" class="space-y-4"></div>
    </div>
  </section>

  <!-- Gerente -->
  <section id="vista-gerente" class="pt-24 hidden">
    <div class="container mx-auto">
      <h2 class="text-2xl font-semibold mb-4">Resumen de Ventas</h2>
      <div id="panelGerente"></div>
    </div>
  </section>

  <script>
    const platos = [
      { id: 1, nombre: "Lomo Saltado", precio: 22, categoria: "Plato de fondo", disponible: true },
      { id: 2, nombre: "Causa Limeña", precio: 12, categoria: "Entrada", disponible: true },
      { id: 3, nombre: "Arroz Chaufa", precio: 18, categoria: "Plato de fondo", disponible: true },
    ];

    const pedidoActual = [];
    const pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];

    function mostrarVista(vista) {
      document.querySelectorAll('section').forEach(sec => sec.classList.add('hidden'));
      document.getElementById(`vista-${vista}`).classList.remove('hidden');
      if (vista === 'cliente') cargarMenu();
      if (vista === 'cocina') cargarCocina();
      if (vista === 'gerente') cargarGerente();
    }

    function cargarMenu() {
      const cont = document.getElementById('menu');
      cont.innerHTML = '';
      platos.forEach(plato => {
        const card = document.createElement('div');
        card.className = 'bg-white p-4 shadow rounded';
        card.innerHTML = `<h3 class='text-lg font-bold'>${plato.nombre}</h3>
                          <p>S/. ${plato.precio}</p>
                          <button onclick='agregarPlato(${plato.id})' class='mt-2 bg-blue-500 text-white px-2 py-1 rounded'>Agregar</button>`;
        cont.appendChild(card);
      });
    }

    function agregarPlato(id) {
      const plato = platos.find(p => p.id === id);
      pedidoActual.push(plato);
      actualizarResumen();
    }

    function actualizarResumen() {
      const resumen = document.getElementById('resumenPedido');
      resumen.innerHTML = '';
      pedidoActual.forEach(p => {
        const li = document.createElement('li');
        li.textContent = `${p.nombre} - S/. ${p.precio}`;
        resumen.appendChild(li);
      });
    }

    function enviarPedido() {
      const nuevoPedido = {
        id: Date.now(),
        platos: [...pedidoActual],
        estado: 'en preparación',
        horaInicio: new Date().toLocaleTimeString()
      };
      pedidos.push(nuevoPedido);
      localStorage.setItem('pedidos', JSON.stringify(pedidos));
      pedidoActual.length = 0;
      actualizarResumen();
      alert('Pedido enviado a cocina');
    }

    function cargarCocina() {
      const cont = document.getElementById('panelCocina');
      cont.innerHTML = '';
      pedidos.forEach(p => {
        const div = document.createElement('div');
        div.className = 'bg-white p-4 rounded shadow';
        const lista = p.platos.map(pl => `<li>${pl.nombre}</li>`).join('');
        div.innerHTML = `<h4>Pedido ${p.id}</h4><ul class='list-disc list-inside'>${lista}</ul>
                         <p>Estado: ${p.estado}</p>
                         <button onclick='marcarTerminado(${p.id})' class='mt-2 bg-green-500 text-white px-2 py-1 rounded'>Terminar</button>`;
        cont.appendChild(div);
      });
    }

    function marcarTerminado(id) {
      const index = pedidos.findIndex(p => p.id === id);
      pedidos[index].estado = 'terminado';
      pedidos[index].horaFin = new Date().toLocaleTimeString();
      localStorage.setItem('pedidos', JSON.stringify(pedidos));
      cargarCocina();
    }

    function cargarGerente() {
      const total = pedidos.reduce((acc, p) => {
        const suma = p.platos.reduce((s, pl) => s + pl.precio, 0);
        return acc + suma;
      }, 0);
      document.getElementById('panelGerente').innerHTML = `<p>Total de ventas: S/. ${total}</p>`;
    }

    mostrarVista('cliente');
  </script>

</body>
</html>


